/**
 * @param {number[][]} matrix
 * @return {number}
 */
var maxMatrixSum = function(matrix) {
    const n = matrix.length;

    let mini = Number.MAX_SAFE_INTEGER;
    let runningSum = 0;
    let negatives = 0;

    for (let i = 0; i < n; i++) {
        for (let j = 0; j < n; j++) {
            const num = matrix[i][j];
            mini = Math.min(mini, Math.abs(num));
            if (num < 0) {
                negatives++;
                runningSum -= num;
            }else runningSum += num;
        }
    }

    return (negatives & 1) ? (runningSum - 2 * mini) : runningSum;
};
